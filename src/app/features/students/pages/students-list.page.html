<ion-header
  [translucent]="true"
  style="background-color: #d9d9d900; box-shadow: none"
  >
  <div class="header">
    <div class="header_div1">
      <ion-icon name="chevron-back-outline" (click)="back()"></ion-icon>
      <p>Alunos</p>
    </div>

    <div class="header_div2">
      <div class="search-wrapper">
        <ion-icon name="search-outline" class="pesquisa"></ion-icon>
        <input
          type="text"
          placeholder="Buscar"
          [(ngModel)]="searchTerm"
          aria-label="Buscar alunos"
          />
        </div>

        <div class="filter-wrapper" (click)="toggleFilter($event)">
          <ion-icon name="filter-circle-outline" class="filter-icon"></ion-icon>

          <!-- dropdown de filtro -->
          @if (showFilter) {
            <div
              class="filter-menu"
              (click)="$event.stopPropagation()"
              >
              <div class="filter-title">Filtrar por:</div>
              <button class="filter-item" (click)="selectFilter('A-Z')">
                <span>A-Z</span>
                @if (selectedFilter === 'A-Z') {
                  <ion-icon
                    name="checkmark-outline"
                  ></ion-icon>
                }
              </button>
              <button class="filter-item" (click)="selectFilter('Z-A')">
                <span> Z-A</span>
                @if (selectedFilter === 'Z-A') {
                  <ion-icon
                    name="checkmark-outline"
                  ></ion-icon>
                }
              </button>
              <button class="filter-item" (click)="selectFilter('Masculino')">
                <span>Masculino</span>
                @if (selectedFilter === 'Masculino') {
                  <ion-icon
                    name="checkmark-outline"
                  ></ion-icon>
                }
              </button>
              <button class="filter-item" (click)="selectFilter('Feminino')">
                <span>Feminino</span>
                @if (selectedFilter === 'Feminino') {
                  <ion-icon
                    name="checkmark-outline"
                  ></ion-icon>
                }
              </button>
              <button class="filter-item" (click)="selectFilter('Em dia')">
                <span> Em dia</span>
                @if (selectedFilter === 'Em dia') {
                  <ion-icon
                    name="checkmark-outline"
                  ></ion-icon>
                }
              </button>
              <button class="filter-item" (click)="selectFilter('Em atraso')">
                <span> Em atraso</span>
                @if (selectedFilter === 'Em atraso') {
                  <ion-icon
                    name="checkmark-outline"
                  ></ion-icon>
                }
              </button>
              <div class="divider"></div>
              <div class="filter-actions" (click)="clearFilter()">
                <button class="link">Limpar</button>
              </div>
            </div>
          }
        </div>
      </div>
    </div>
  </ion-header>

  <ion-content [fullscreen]="true" style="--background: #d9d9d9">
    <main>
      <section class="block">
        @if (filteredStudents.length) {
          @for (aluno of filteredStudents; track aluno) {
            <div class="button" (click)="informationStudients(aluno.id)">
              <ion-icon name="person-circle-outline"></ion-icon>
              <div class="student-info">
                <p class="name">{{ aluno.name }}  {{ aluno.surname }}</p>
                <small class="meta"
                  >{{ aluno.gender === 'Masculino' ? 'Masculino' : 'Feminino' }} â€¢ {{
                  aluno.status }}</small
                  >
                </div>
              </div>
            }
          } @else {
            <p style="padding: 16px; color: #666">Nenhum aluno encontrado.</p>
          }

        </section>
      </main>

      <footer style="background-color: rgba(0, 0, 0, 0); height: 48px"></footer>
    </ion-content>
